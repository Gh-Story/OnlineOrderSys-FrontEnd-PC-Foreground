{"remainingRequest":"F:\\东北大学\\学校文件\\实训\\前端\\20200718\\pc_fd_f\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\东北大学\\学校文件\\实训\\前端\\20200718\\pc_fd_f\\src\\views\\Home\\CustomerService\\CustomerService.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\东北大学\\学校文件\\实训\\前端\\20200718\\pc_fd_f\\src\\views\\Home\\CustomerService\\CustomerService.vue","mtime":1594907544932},{"path":"F:\\东北大学\\学校文件\\实训\\前端\\20200718\\pc_fd_f\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500371},{"path":"F:\\东北大学\\学校文件\\实训\\前端\\20200718\\pc_fd_f\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500371},{"path":"F:\\东北大学\\学校文件\\实训\\前端\\20200718\\pc_fd_f\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500371},{"path":"F:\\东北大学\\学校文件\\实训\\前端\\20200718\\pc_fd_f\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500371}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKCWRhdGEoKSB7CgkJcmV0dXJuIHsKCQkJaW1nTGlzdDogWwoJCQkJe2lkOiAwLCBpZFZpZXc6IHJlcXVpcmUoJy4uLy4uLy4uLy4uL3N0YXRpYy84LmpwZycpfSwKCQkJCQoJCQldLAoJCQltZXNzYWdlczpbCgkJCQkKCQkJXSwKCQkJbWVzc2FnZTonJywKCQkJd3M6JycsCgkJCWN1c3RvbWVySWQ6JycsCgkJCXNlcnZpY2VOYW1lOicnCgkJfQoJfSwKCWNyZWF0ZWQoKXsKCQlsZXQgY3VzdG9tZXI9dGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDdXN0b21lcjsKCQljb25zb2xlLmxvZyhjdXN0b21lcik7CgkJdGhpcy5jdXN0b21lcklkID0gY3VzdG9tZXIuY3VzdG9tZXJJZDsKCQl0aGlzLnNlcnZpY2VOYW1lID0gY3VzdG9tZXIuY3VzdG9tZXJOYW1lOwoJCWNvbnNvbGUubG9nKGB3czovL2xvY2FsaG9zdDo4MDgwL3dzcy8ke3RoaXMuc2VydmljZU5hbWV9LyR7dGhpcy5jdXN0b21lcklkfWApOwoJCXRoaXMud3MgPSBuZXcgV2ViU29ja2V0KGB3czovL2xvY2FsaG9zdDo4MDgwL3dzcy8ke3RoaXMuc2VydmljZU5hbWV9LyR7dGhpcy5jdXN0b21lcklkfWApOwoJCXRoaXMud3Mub25vcGVuID0gdGhpcy53c09wZW47CgkJdGhpcy53cy5vbmNsb3NlID0gdGhpcy53c0Nsb3NlOwoJCXRoaXMud3Mub25lcnJvciA9IHRoaXMud3NFcnJvcjsKCQl0aGlzLndzLm9ubWVzc2FnZSA9IHRoaXMud3NNZXNzYWdlOwoJfSwKCW1ldGhvZHM6ewoJCXNlbmRNZXNzYWdlKCl7CgkJCWxldCBtZXNzYWdlX2l0ZW09e2N1c3RvbWVySWQ6MSxjdXN0b21lck5hbWU6JycsbWVzc2FnZTonJ307CgkJCW1lc3NhZ2VfaXRlbS5jdXN0b21lck5hbWU9J+aIkSc7CgkJCW1lc3NhZ2VfaXRlbS5tZXNzYWdlPXRoaXMubWVzc2FnZTsKCQkJdGhpcy5tZXNzYWdlcy5wdXNoKG1lc3NhZ2VfaXRlbSk7CgkJCS8v5Y+R6YCB5raI5oGvCgkJCWxldCByZXNwb25zZT1tZXNzYWdlX2l0ZW0ubWVzc2FnZSsnXycrdGhpcy5jdXN0b21lcklkKydfJysnLTEnOwoJCQljb25zb2xlLmxvZyhyZXNwb25zZSk7CgkJCXRoaXMud3Muc2VuZChyZXNwb25zZSk7CgkJCS8v5Yi35paw6aG16Z2iCgkJCXRoaXMubWVzc2FnZT0iIjsKCQkJdGhpcy4kbmV4dFRpY2soKCkgPT4gewoJCQkgICAgICAgdGhpcy4kcmVmcy5tYWluLnNjcm9sbFRvcCA9IHRoaXMuJHJlZnMuY29udGVudC5zY3JvbGxIZWlnaHQ7CgkJCX0pOwoJCX0sCgkJd3NNZXNzYWdlKGV2ZW50KXsKCQkJY29uc29sZS5sb2coZXZlbnQuZGF0YSk7Ly/ov5Tlm57nmoTmlbDmja7lhoXlrrkKCQkJbGV0IGRhdGE9SlNPTi5wYXJzZShldmVudC5kYXRhKTsKCQkJY29uc29sZS5sb2coZGF0YS5tZXNzYWdlVHlwZSk7CgkJCWlmKGRhdGEubWVzc2FnZVR5cGU9PTEpewoJCQkJbGV0IG1lc3NhZ2VfaXRlbT17Y3VzdG9tZXJJZDotMSxjdXN0b21lck5hbWU6JycsbWVzc2FnZTonJ307CgkJCQltZXNzYWdlX2l0ZW0uY3VzdG9tZXJJZD1kYXRhLmNsaWVudElkOwoJCQkJbWVzc2FnZV9pdGVtLmN1c3RvbWVyTmFtZT1kYXRhLmNsaWVudE5hbWU7CgkJCQltZXNzYWdlX2l0ZW0ubWVzc2FnZT1kYXRhLm1lc3NhZ2U7CgkJCQl0aGlzLm1lc3NhZ2VzLnB1c2gobWVzc2FnZV9pdGVtKTsKCQkJCXRoaXMuJG5leHRUaWNrKCgpID0+IHsKCQkJCSAgICAgICB0aGlzLiRyZWZzLm1haW4uc2Nyb2xsVG9wID0gdGhpcy4kcmVmcy5jb250ZW50LnNjcm9sbEhlaWdodDsKCQkJCX0pOwoJCQl9CgkJfSwKCQl3c09wZW4oKXsKCQkJY29uc29sZS5sb2coIndlYnNvY2tldOW8gOWQryIpOwoJCX0sCgkJd3NFcnJvcigpewoJCQljb25zb2xlLmxvZygid2Vic29ja2V06ZSZ6K+vIik7CgkJfSwKCQl3c0Nsb3NlKCl7CgkJCWNvbnNvbGUubG9nKCJ3ZWJzb2NrZXTlhbPpl60iKTsKCQl9LAoJCQoJfQoKfQoK"},{"version":3,"sources":["CustomerService.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"CustomerService.vue","sourceRoot":"src/views/Home/CustomerService","sourcesContent":["<template>\n\t<div class=\"customerService\">\n\t\t<div class=\"top\">\n\t\t\t<div class=\"top_div1\">\n\t\t\t\t<el-row style=\"width: 600px; height: 40px;display: flex;flex-direction: row;\">\n\t\t\t\t\t<div class=\"block\" ><el-avatar :size=\"50\" :src=\"imgList[0].idView\"></el-avatar></div>\n\t\t\t\t\t<el-alert style=\"margin-left: 10%;\" title=\"您好,客服小饱很高心为您服务\" type=\"info\" :closable=\"false\"></el-alert>\n\t\t\t\t</el-row>\n\t\t\t</div>\t\t\t\t\n\t\t</div>\n\t\t<div class=\"medium\">\n\t\t\t<div class=\"Panel\">\n\t\t\t\t<el-card class=\"Mycard\">\n\t\t\t\t  <div class=\"head\" slot=\"header\" style=\"text-align: center;\">\n\t\t\t\t    <span >在线客服</span>\n\t\t\t\t  </div>\n\t\t\t\t  <div class=\"body\">\n\t\t\t\t\t<div ref=\"main\" class=\"middle\">\n\t\t\t\t\t\t<div ref=\"content\">\n\t\t\t\t\t\t\t<div v-for=\"item in messages\">\n\t\t\t\t\t\t\t\t<div :class=\"{left:item.customerId<0,right:item.customerId>0}\" style=\"width: 60%;\">\n\t\t\t\t\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t\t\t\t\t<span>{{item.customerName}}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"chartBox\">\n\t\t\t\t\t\t\t\t\t  <span v-text=\"item.message\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bottom\">\n\t\t\t\t\t\t<el-row>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<el-col :span=\"15\">\n\t\t\t\t\t\t\t\t<el-input\n\t\t\t\t\t\t\t\t  style=\"padding-left: 2%;padding-top: 10px;\"\n\t\t\t\t\t\t\t\t  type=\"textarea\"\n\t\t\t\t\t\t\t\t  :autosize=\"{minRows:2,maxRows:3}\"\n\t\t\t\t\t\t\t\t  placeholder=\"请输入内容\"\n\t\t\t\t\t\t\t\t  v-model=\"message\">\n\t\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t\t<el-col :span=\"4\">\n\t\t\t\t\t\t\t\t <el-button @click=\"sendMessage\" style=\"float:right; margin-right:15px;margin-top: 15px;\" type=\"warning\" size=\"small\">发送</el-button>\n\t\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t</el-row>\n\t\t\t\t\t</div>\n\t\t\t\t  </div>\n\t\t\t\t  \n\t\t\t\t</el-card>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t\t<div class=\"buttom\">\n\t\t\t<el-divider  content-position=\"center\"><el-link class=\"el-icon-phone\" type=\"primary\">电话客服：83332333</el-link></el-divider>\n\t\t\t\n\t\t\t\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\timgList: [\n\t\t\t\t\t{id: 0, idView: require('../../../../static/8.jpg')},\n\t\t\t\t\t\n\t\t\t\t],\n\t\t\t\tmessages:[\n\t\t\t\t\t\n\t\t\t\t],\n\t\t\t\tmessage:'',\n\t\t\t\tws:'',\n\t\t\t\tcustomerId:'',\n\t\t\t\tserviceName:''\n\t\t\t}\n\t\t},\n\t\tcreated(){\n\t\t\tlet customer=this.$store.getters.getCustomer;\n\t\t\tconsole.log(customer);\n\t\t\tthis.customerId = customer.customerId;\n\t\t\tthis.serviceName = customer.customerName;\n\t\t\tconsole.log(`ws://localhost:8080/wss/${this.serviceName}/${this.customerId}`);\n\t\t\tthis.ws = new WebSocket(`ws://localhost:8080/wss/${this.serviceName}/${this.customerId}`);\n\t\t\tthis.ws.onopen = this.wsOpen;\n\t\t\tthis.ws.onclose = this.wsClose;\n\t\t\tthis.ws.onerror = this.wsError;\n\t\t\tthis.ws.onmessage = this.wsMessage;\n\t\t},\n\t\tmethods:{\n\t\t\tsendMessage(){\n\t\t\t\tlet message_item={customerId:1,customerName:'',message:''};\n\t\t\t\tmessage_item.customerName='我';\n\t\t\t\tmessage_item.message=this.message;\n\t\t\t\tthis.messages.push(message_item);\n\t\t\t\t//发送消息\n\t\t\t\tlet response=message_item.message+'_'+this.customerId+'_'+'-1';\n\t\t\t\tconsole.log(response);\n\t\t\t\tthis.ws.send(response);\n\t\t\t\t//刷新页面\n\t\t\t\tthis.message=\"\";\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t       this.$refs.main.scrollTop = this.$refs.content.scrollHeight;\n\t\t\t\t});\n\t\t\t},\n\t\t\twsMessage(event){\n\t\t\t\tconsole.log(event.data);//返回的数据内容\n\t\t\t\tlet data=JSON.parse(event.data);\n\t\t\t\tconsole.log(data.messageType);\n\t\t\t\tif(data.messageType==1){\n\t\t\t\t\tlet message_item={customerId:-1,customerName:'',message:''};\n\t\t\t\t\tmessage_item.customerId=data.clientId;\n\t\t\t\t\tmessage_item.customerName=data.clientName;\n\t\t\t\t\tmessage_item.message=data.message;\n\t\t\t\t\tthis.messages.push(message_item);\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t       this.$refs.main.scrollTop = this.$refs.content.scrollHeight;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\twsOpen(){\n\t\t\t\tconsole.log(\"websocket开启\");\n\t\t\t},\n\t\t\twsError(){\n\t\t\t\tconsole.log(\"websocket错误\");\n\t\t\t},\n\t\t\twsClose(){\n\t\t\t\tconsole.log(\"websocket关闭\");\n\t\t\t},\n\t\t\t\n\t\t}\n\t\n\t}\n\t\n</script>\n\n<style lang=\"less\" scoped>\n\t.customerService{\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\twidth:100%;\n\t\theight:100%;\n\t\t.top{\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t\tflex:1;\n\t\t\t//background-color: blanchedalmond;\n\t\t\t.top_div1{\n\t\t\t\tmargin-top: 3%;\n\t\t\t}\n\t\t}\n\t\t.medium{\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t\tflex:5;\n\t\t\t//background-color: lightgoldenrodyellow;\n\t\t\t.medium_div1{\n\t\t\t\twidth:100%;\n\t\t\t}\n\t\t\t.Panel{\n\t\t\t\t//background-color: blue;\n\t\t\t\theight:550px;\n\t\t\t\twidth:70%;\n\t\t\t\tmargin-top: 50px;\n\t\t\t\tmargin-left: 15%;\n\t\t\t\tmargin-right: 100px;\n\t\t\t\t.Mycard{\n\t\t\t\t\theight: 100%;\n\t\t\t\t\t/deep/ .el-card__header{\n\t\t\t\t\t\tbackground-color:#f6f6f6 ;\n\t\t\t\t\t}\n\t\t\t\t\t.head{\n\t\t\t\t\t\t//background-color: #D3DCE6;\n\t\t\t\t\t}\n\t\t\t\t\t.body{\n\t\t\t\t\t\t\n\t\t\t\t\t\t.middle{\n\t\t\t\t\t\t\tpadding-left: 5px;\n\t\t\t\t\t\t\tpadding-right: 5px;\n\t\t\t\t\t\t\theight: 405px;\n\t\t\t\t\t\t\toverflow: auto;\n\t\t\t\t\t\t\t//background-color: #eaeaea;\n\t\t\t\t\t\t\t.left{\n\t\t\t\t\t\t\t\tpadding-top: 5px;\n\t\t\t\t\t\t\t\tfloat:left;\n\t\t\t\t\t\t\t\ttext-align: left;\n\t\t\t\t\t\t\t\t.chartBox{\n\t\t\t\t\t\t\t\t\tpadding-left: 15px;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.right{\n\t\t\t\t\t\t\t\tfloat:right;\n\t\t\t\t\t\t\t\ttext-align: right;\n\t\t\t\t\t\t\t\t.chartBox{\n\t\t\t\t\t\t\t\t\tpadding-right: 15px;\n\t\t\t\t\t\t\t\t\tspan{\n\t\t\t\t\t\t\t\t\t\tpadding:5px;\n\t\t\t\t\t\t\t\t\t\t//background-color: #e2f5fa;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.name{\n\t\t\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.chartBox{\n\t\t\t\t\t\t\t\tpadding: 6px;\n\t\t\t\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\t\t\t\tspan{\n\t\t\t\t\t\t\t\t\tbackground-color: #e2f5fa;\n\t\t\t\t\t\t\t\t\tborder: 1px solid #e5e8f0;\n\t\t\t\t\t\t\t\t\tpadding: 3px;\n\t\t\t\t\t\t\t\t\tborder-radius: 5px;\n\t\t\t\t\t\t\t\t\tpadding:5px;\n\t\t\t\t\t\t\t\t\tword-break:break-all;\n\t\t\t\t\t\t\t\t\tdisplay:inline-block;\n\t\t\t\t\t\t\t\t\t//display:block; \n\t\t\t\t\t\t\t\t\t//word-wrap : break-word ;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t.bottom{\n\t\t\t\t\t\t\theight: 90px;\n\t\t\t\t\t\t\t//background-color: #e5e8f0;\n\t\t\t\t\t\t\tborder-top:1px solid #e5e8f0;\n\t\t\t\t\t\t\t/deep/ .el-button{\n\t\t\t\t\t\t\t\tbackground-color: #e2f5fa;\n\t\t\t\t\t\t\t\tborder-color:  #c6f5fa;\n\t\t\t\t\t\t\t\tcolor: black;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t/deep/.el-card__body{\n\t\t\t\t\t\tpadding: 0px !important;\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.buttom{\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t\tflex:1;\n\t\t\t//background-color: yellow;\n\t\t}\n\t}\n</style>\n"]}]}